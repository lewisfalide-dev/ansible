# Задание: создать плейбук `/home/user/task/site.yaml`

## Требования

1. **Обновить apt и установить последнюю версию nginx**  
   Использовать модуль `apt`.

2. **Добавить веб-сервер в автозагрузку системы**  
   Использовать модуль `service`.

3. **Обновить конфигурацию веб-сервера по умолчанию**  
   - Взять файл из репозитория:  
     `/home/user/task/DVPS-ANS-07/nginx.conf`  
   - Использовать модуль `copy`.  
   - Создать хэндлер **nginx reload** для перезапуска веб-сервера через модуль `service`.

4. **Удалить стандартные файлы nginx**  
   - Удалить:
     - `/etc/nginx/sites-enabled/default`
     - `/var/www/html/index.nginx-debian.html`  
   - Использовать модуль `file` и цикл `loop`.  
   - Применить хэндлер **nginx reload**.

5. **Добавить конфигурацию сайта**  
   - Использовать модуль `template`.  
   - Копировать из:  
     `/home/user/task/DVPS-ANS-07/site.conf.j2`  
   - В папку:  
     `/etc/nginx/sites-available/site.conf`.

6. **Создать символическую ссылку на сайт**  
   Использовать модуль `file`:
   ```yaml
   src: /etc/nginx/sites-available/site.conf
   dest: /etc/nginx/sites-enabled/site.conf
   state: link
   ```

7. - **Создаст статические страницы продуктов** с помощью модуля `template` и цикла `loop`:
  - За образец страницы продукта можно взять:  
    `/home/user/task/DVPS-ANS-07/site/apple.html`.  
    С помощью него сделайте универсальный шаблон **jinja**,  
    в который можно экспортировать значения из предоставленного словаря:  
    `/home/user/task/DVPS-ANS-07/products.yaml`
  - В предоставленном словаре намеренно некоторые значения `name`  
    указаны в разном регистре.  
    Однако все html-страницы на веб-сайте должны быть строго в **нижнем регистре**.  
    Например: `banana.html`.  
    Используйте фильтр `lower`.
  - В карточке товара его название должно быть в **верхнем регистре**.  
    Например: `<h2>BANANA</h2>`.  
    Используйте фильтр внутри шаблона `upper`.
  - Скопируйте все полученные страницы продуктов в папку:  
    `/var/www/html/`  
    на конфигурируемом веб-сервере.

---

8. - **Создаст заглавную страницу с оглавлением**,  
  в котором есть ссылки на все товары с помощью модуля `template`:
  - За образец можно взять:  
    `/home/user/task/DVPS-ANS-07/site/index.html`.  
    С помощью него сделайте шаблон **jinja**,  
    в который можно экспортировать значения из словаря:  
    `/home/user/task/DVPS-ANS-07/products.yaml`
  - Ссылка на продукт должна быть в **нижнем регистре**.
  - Организуйте внутри шаблона цикл,  
    который сформирует название и ссылку на каждый продукт.
  - Отсортируйте все продукты в алфавитном порядке  
    с помощью фильтра `sort(attribute='name')`.
  - В оглавлении представьте каждый продукт с **большой буквы**.  
    Например: `Banana`.  
    Используйте фильтр `capitalize`.

---

## Проверка результата

Запустите ваш плейбук и убедитесь, что он отображает всё корректно:  
- вы можете переходить по ссылкам на продукты;  
- вы можете возвращаться к оглавлению.

**Должно быть так:**

![Пример 1](https://rbr-rls-prod-backend-files.website.yandexcloud.net/plugins/infrastructure/70506f118385d5d3be11f8c49d11a5e2.png)  
![Пример 2](https://rbr-rls-prod-backend-files.website.yandexcloud.net/plugins/infrastructure/b2d76d2edf2a62548f633cb3743675b2.png)



