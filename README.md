Создайте плейбук /home/user/task/site.yaml, который:
Обновит apt и установит последнюю версию nginx с помощью модуля apt;
Добавит веб-сервер в автозагрузку системы с помощью модуля service;
Обновит конфигурацию веб-сервера по умолчанию. Воспользуйтесь для этого файлом из репозитория /home/user/task/DVPS-ANS-07/nginx.conf и модулем copy. Так как кофнигурация должна быть перечитана, то создайте к этому шагу хэндлер nginx reload, с перезапуском веб-сервера с помщью модуля service;
Удалит символическую ссылку на активный сайт по умолчанию /etc/nginx/sites-enabled/default, а также html-страницу по умолчанию /var/www/html/index.nginx-debian.html с помощью модуля file. Этот шаг должен быть организован с помощью цикла loop. Примените к этому шагу хэндлер nginx reload.
Добавит конфигурацию nginx нашего веб-сайта в доступные путём копирования шаблона из репозитория /home/user/task/DVPS-ANS-07/site.conf.j2 в папку /etc/nginx/sites-available/site.conf конфигурируемого веб-сервера с помощью модуля template;
Добавит символическую ссылку на наш веб-сайт с помощью модуля file, а затем применит хэндлер nginx reload:
src: /etc/nginx/sites-available/site.conf
dest: /etc/nginx/sites-enabled/site.conf
state: link
Создаст статические страницы продуктов с помощью модуля template и цикла loop:
За образец страницы продукта можно взять /home/user/task/DVPS-ANS-07/site/apple.html. С помощью него сделайте универсальный шаблон jinja, в который можно экспортировать значения из предоставленного словаря /home/user/task/DVPS-ANS-07/products.yaml;
В предоставленном словаре намеренно некоторые значения name предоставлены в разном регистре. Однако все html страницы на веб-сайте должны быть строго в нижнем регистре. Например: banana.html. Воспользутесь здесь фильтром lower;
В карточке товара его название должно быть в верхнем регистре. Например: <h2>BANANA</h2>. Воспользуйтесь здесь фильтром внутри шаблона upper;
Скопируйте все полученные страницы продуктов в папку /var/www/html/ на конфигурируемом веб-сервере.
Создаст заглавную страницу с оглавлением, в котором есть ссылки на все товары с помощью модуля template:
За образец страницы продукта можно взять /home/user/task/DVPS-ANS-07/site/index.html. С помощью него сделайте шаблон jinja, в который можно экспортировать значения из предоставленного словаря /home/user/task/DVPS-ANS-07/products.yaml;
Обратите внимание, что ссылка на продукт должна быть в нижнем регистре;
Организуйте внутри шаблона цикл, который сформирует название и ссылку на каждый продукт. Отсортируйте все продукты в алфавитном порядке с помощью фильтра sort(attribute='name');
В оглавлении представьте каждый продукт с большой буквы. Например: Banana. Воспользуйтесь здесь фильтром capitalize.
Запустите ваш плейбук и убедитесь, что он отображает всё корректно: вы можете переходить по ссылкам в продукты и возвращаться к оглавлению:

должно быть так
https://rbr-rls-prod-backend-files.website.yandexcloud.net/plugins/infrastructure/70506f118385d5d3be11f8c49d11a5e2.png
https://rbr-rls-prod-backend-files.website.yandexcloud.net/plugins/infrastructure/b2d76d2edf2a62548f633cb3743675b2.png
